@model IEnumerable<WEBGIAY.Areas.Merchant.Models.RATINGViewModel>
</br>
<div class="pull-right" style="font-style:italic;color:gray">Nhập đánh giá và nhấn enter để gửi</div>
<h2>Đánh giá nhà bán hàng</h2>
<div class="form-horizontal">
    <table class="table table-responsive" width="300">
        <tr>
            <th>
                Đơn hàng
            </th>
            <th>
                Sản phẩm
            </th>
            <th>
                Nhà bán hàng
            </th>
            <th>
                Đánh giá
            </th>

        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td width="100">
                    @Html.DisplayFor(modelItem => item.MADH)
                </td>
                <td width="500">
                    @Html.DisplayFor(modelItem => item.TENSP)
                </td>
                <td width="300">
                    @Html.DisplayFor(modelItem => item.TENUSER)
                </td>
                <td width="200">
                    <input id="rating" data-madh="@item.MADH" data-masp="@item.MASP" data-mamer="@item.MAUSER" value="@item.RATING" type="number" max="5" min="0" />
                </td>

            </tr>
        }

    </table>
</div>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script>
    $('#rating').off('keypress').on('keypress', function (e) {
        if (e.which == 13) {
            var iddonhang = Number($(this).data('madh'));
            var idsp = Number($(this).data('masp'));
            var idmer = Number($(this).data('mamer'));
            var rating = Number($(this).val());
            alert(idmer);

            $.ajax({
                type: "post",
                url: "/user/capnhatdanhgiatucus",
                data: { iddonhang: iddonhang, idsp: idsp, idmer: idmer, rating: rating },
                error: function (err) {
                    alert(err.statusText);
                },
                success: function () {
                    location.reload();
                }
            });
        }
    });
</script>


